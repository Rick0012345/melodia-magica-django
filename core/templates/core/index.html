{% extends 'core/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/Index.css' %}">
{% endblock %}

{% block content %}
<section class="hero-section">
  <!-- Vídeo de background -->
  <video class="hero-video-bg" autoplay muted loop playsinline id="heroVideo">
    <source src="{% static 'core/video/burn-it-down.mp4' %}" type="video/mp4">
    Seu navegador não suporta vídeos HTML5.
  </video>
  
  <!-- Botão para ativar som -->
  <button class="sound-toggle-btn" id="soundToggle" onclick="toggleSound()">
    <i class="fas fa-volume-mute" id="soundIcon"></i>
  </button>
  
  <!-- Overlay para escurecer o vídeo -->
  <div class="hero-video-overlay"></div>
  
  <img src="{% static 'core/images/urso_guitarra.gif' %}" alt="urso guitarrista" class="urso-guitarra">
  <img src="{% static 'core/images/urso_guitarra.gif' %}" alt="urso guitarrista" class="urso-guitarra2">
  <img src="{% static 'core/images/urso_guitarra.gif' %}" alt="urso guitarrista" class="urso-guitarra3">
  <img src="{% static 'core/images/urso_guitarra.gif' %}" alt="urso guitarrista" class="urso-guitarra3">
  <div class="container">
    <div class="hero-content">
    <h1 class="interactive-title">Melodia Mágica</h1>

      <div class="hero-buttons">
        {% if user.is_authenticated %}
          <a href="{% url 'menu' %}" class="btn btn-primary">Quiz</a>
          <a href="{% url 'niveis' %}" class="btn btn-secondary">Níveis</a>
        {% else %}
          <a href="{% url 'account_login' %}" class="btn btn-primary">Entrar</a>
          <a href="{% url 'account_signup' %}" class="btn btn-secondary">Cadastrar</a>
        {% endif %}
      </div>
     
      </div>
    </div>
  </div>
</section>
<!-- Contêiner para as partículas -->
<div id="particle-container"></div>

<script>
function toggleSound() {
    const video = document.getElementById('heroVideo');
    const soundIcon = document.getElementById('soundIcon');
    
    if (video.muted) {
        video.muted = false;
        soundIcon.className = 'fas fa-volume-up';
    } else {
        video.muted = true;
        soundIcon.className = 'fas fa-volume-mute';
    }
}

// Tentar reproduzir o vídeo com som após interação do usuário
document.addEventListener('DOMContentLoaded', function() {
    const video = document.getElementById('heroVideo');
    
    // Tentar reproduzir automaticamente
    video.play().catch(function(error) {
        console.log('Autoplay foi bloqueado:', error);
    });
    
    // Adicionar evento de clique em qualquer lugar para ativar o som
    document.addEventListener('click', function enableAudio() {
        if (video.paused) {
            video.play();
        }
        // Remover o listener após a primeira interação
        document.removeEventListener('click', enableAudio);
    }, { once: true });
});
</script>

{% endblock %}
